
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>ARDEP Interface &#8212; ARDEP  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/css/custom.css" />
    <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../_static/copybutton.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="Power IO Outputs" href="../outputs/index.html" />
    <link rel="prev" title="Power IO Inputs" href="../inputs/index.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ardep-interface">
<span id="power-io-shield-ardep-interface"></span><h1>ARDEP Interface<a class="headerlink" href="#ardep-interface" title="Permalink to this heading">¶</a></h1>
<p>To allow more than one Power IO shield to be stacked, the shields do not directly interface with the ARDEP’s GPIOs but instead use an MCP23017T <span class="math notranslate nohighlight">\(I^2C\)</span> port expander with individually configurable address.
The shield’s <span class="math notranslate nohighlight">\(I^2C\)</span> address can be configured to one of the 8 available addresses using a rotary selector that is directly connected to the MCP23017T address lines.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../../../../../_images/rotary_switch.png"><img alt="../../../../../_images/rotary_switch.png" src="../../../../../_images/rotary_switch.png" style="width: 50%;" /></a>
<figcaption>
<p><span class="caption-text">Rotary switch</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../../../../../_images/port_expander_address_line_interface.png"><img alt="../../../../../_images/port_expander_address_line_interface.png" src="../../../../../_images/port_expander_address_line_interface.png" style="width: 100%;" /></a>
<figcaption>
<p><span class="caption-text">Port expander address line interface</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>The shield’s <span class="math notranslate nohighlight">\(I^2C\)</span> address is the sum of 0x20 and the number selected via the rotary switch.</p>
<section id="interrupts">
<h2>Interrupts<a class="headerlink" href="#interrupts" title="Permalink to this heading">¶</a></h2>
<p>To allow a faster response to input changes or fault conditions of the output drivers, the two interrupt lines of the MCP23017T are connected to D12 and D13 on the Arduino-like pin header, corresponding to PE5 and PE2 of the ARDEP Mainboard. The Interrupt outputs of the MCP23017T must be configured as open-drain, and the corresponding inputs on the ARDEP Mainboard need to have their internal pull-up activated.</p>
<p>In a stacked configuration, all port expanders can access the same two interrupt lines.
Every one of them can pull the interrupt line low without interfering with the other expanders.
To avoid cross-currents in case of a misconfigured interrupt output, two diodes (D201 and D204) force an open-drain behaviour and thereby guarantee that no shield can actively drive the interrupt lines high.</p>
</section>
<section id="pin-mapping">
<h2>Pin Mapping<a class="headerlink" href="#pin-mapping" title="Permalink to this heading">¶</a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 30.0%" />
<col style="width: 70.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ARDEP pin ID</p></th>
<th class="head"><p>Power expander shield pin function</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>PE2</p></td>
<td><p>INT0</p></td>
</tr>
<tr class="row-odd"><td><p>PE5</p></td>
<td><p>INT1</p></td>
</tr>
<tr class="row-even"><td><p>PA9</p></td>
<td><p>SCL</p></td>
</tr>
<tr class="row-odd"><td><p>PA8</p></td>
<td><p>SDA</p></td>
</tr>
</tbody>
</table>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../index.html">ARDEP</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bootloader/index.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../firmware_loader/index.html">UDS Firmware Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../console/index.html">Console Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../error_handling/index.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../README.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lib/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../scripts/ardep.html">ARDEP Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercedes/ardep/doc/index.html">ARDEP Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../hv_shield/doc/index.html">ARDEP HV Shield</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ARDEP Power IO Shield</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../inputs/index.html">Power IO Inputs</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ARDEP Interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="../outputs/index.html">Power IO Outputs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../power_supply/index.html">Power IO Voltage Supply</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">ARDEP Power IO Shield</a><ul>
      <li>Previous: <a href="../inputs/index.html" title="previous chapter">Power IO Inputs</a></li>
      <li>Next: <a href="../outputs/index.html" title="next chapter">Power IO Outputs</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Frickly Systems GmbH.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../../../_sources/boards/shields/power_io_shield/doc/interface/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>