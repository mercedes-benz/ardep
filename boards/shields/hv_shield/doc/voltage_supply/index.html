
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Voltage Supply &#8212; ARDEP  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../../../_static/css/custom.css" />
    <script data-url_root="../../../../../" id="documentation_options" src="../../../../../_static/documentation_options.js"></script>
    <script src="../../../../../_static/doctools.js"></script>
    <script src="../../../../../_static/sphinx_highlight.js"></script>
    <script src="../../../../../_static/clipboard.min.js"></script>
    <script src="../../../../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../../search.html" />
    <link rel="next" title="ARDEP Power IO Shield" href="../../../power_io_shield/doc/index.html" />
    <link rel="prev" title="I/O Config Register" href="../io_config_register/index.html" />
   
  <link rel="stylesheet" href="../../../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="voltage-supply">
<span id="hv-extension-shield-voltage-supply"></span><h1>Voltage Supply<a class="headerlink" href="#voltage-supply" title="Permalink to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#logic-supply" id="id6">Logic supply</a></p></li>
<li><p><a class="reference internal" href="#high-voltage-output-supply" id="id7">High Voltage Output supply</a></p></li>
<li><p><a class="reference internal" href="#mosfet-bias-voltage" id="id8">MOSFET Bias Voltage</a></p>
<ul>
<li><p><a class="reference internal" href="#diode-supply-default" id="id9">Diode supply (default)</a></p></li>
<li><p><a class="reference internal" href="#linear-regulator" id="id10">Linear Regulator</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>The High-Voltage shield has three main “supply levels“.
It uses 3,3V as a logic supply, A constant Bias Voltage for the MOSFETs within the Input circuit, and one high-voltage supply for each of the four IO-Banks.</p>
<section id="logic-supply">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Logic supply</a><a class="headerlink" href="#logic-supply" title="Permalink to this heading">¶</a></h2>
<p>The 3,3 V logic supply is provided via the Arduino-like pin header of the Mainboard.</p>
</section>
<section id="high-voltage-output-supply">
<h2><a class="toc-backref" href="#id7" role="doc-backlink">High Voltage Output supply</a><a class="headerlink" href="#high-voltage-output-supply" title="Permalink to this heading">¶</a></h2>
<p>The high voltage level of the output drivers can individually be configured for each of the four IO-Banks.
Using the Jumpers P1..P4 the user can select to supply each IO Bank either with the Mainboard’s input-voltage (Vin) or via the IO-Banks reference pin REF0..3, which can be accessed via the spring terminal block.</p>
<figure class="align-default" id="id1">
<a class="reference internal image-reference" href="../../../../../_images/hv_shield_io_bank_voltage_level.png"><img alt="../../../../../_images/hv_shield_io_bank_voltage_level.png" src="../../../../../_images/hv_shield_io_bank_voltage_level.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Headers for selecting the IO bank’s voltage level</span><a class="headerlink" href="#id1" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<p>Please note, that the voltage level, selected for an IO bank, also sets its maximum allowable Input voltage.
Surpassing the IO-Banks supply voltage may lead to damage to the corresponding output drivers.
<strong>When the mainboard is supplied only via USB, the used IO Banks must be connected to an appropriate reference voltage!</strong></p>
<figure class="align-default" id="id2">
<a class="reference internal image-reference" href="../../../../../_images/hv_shield_io_banks_pinout.png"><img alt="../../../../../_images/hv_shield_io_banks_pinout.png" src="../../../../../_images/hv_shield_io_banks_pinout.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">IO Banks as indicated on the pinout legend of the HV-Shield</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<table class="docutils align-default">
<colgroup>
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
<col style="width: 25.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>IO Bank</p></th>
<th class="head"><p>Output Drivers</p></th>
<th class="head"><p>Digital IOs</p></th>
<th class="head"><p>Reference Pin</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>0,1</p></td>
<td><p>D1..8</p></td>
<td><p>REF0</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>2,3</p></td>
<td><p>D9..16</p></td>
<td><p>REF1</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>4,5</p></td>
<td><p>D17..24</p></td>
<td><p>REF2</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>6,7</p></td>
<td><p>D25..32</p></td>
<td><p>REF3</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mosfet-bias-voltage">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">MOSFET Bias Voltage</a><a class="headerlink" href="#mosfet-bias-voltage" title="Permalink to this heading">¶</a></h2>
<p>It was determined that a suitable MOSFET bias voltage should be at around 4.2V.
This ensures that the output levels are within the tolerated range of the STM32 and are reliably detected as logic high.</p>
<p>The HV-Shield offers two ways of setting the bias voltage.
Either by using a diode supply or a dedicated linear regulator.
The source can be altered by changing the bias selection solder jumper.
<strong>Read the documentation carefully and ensure you know what you are doing before attempting to change this setting.</strong></p>
<figure class="align-default" id="id3">
<a class="reference internal image-reference" href="../../../../../_images/hv_shield_mosfet_bias_voltage_circuit.png"><img alt="../../../../../_images/hv_shield_mosfet_bias_voltage_circuit.png" src="../../../../../_images/hv_shield_mosfet_bias_voltage_circuit.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Circuit for generating the MOSFET bias voltage</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<figure class="align-default" id="id4">
<a class="reference internal image-reference" href="../../../../../_images/hv_shield_mosfet_bias_section_voltage_jumper.png"><img alt="../../../../../_images/hv_shield_mosfet_bias_section_voltage_jumper.png" src="../../../../../_images/hv_shield_mosfet_bias_section_voltage_jumper.png" style="width: 300px;" /></a>
<figcaption>
<p><span class="caption-text">Bias selection solder jumper (defaults to diode supply)</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
<section id="diode-supply-default">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Diode supply (default)</a><a class="headerlink" href="#diode-supply-default" title="Permalink to this heading">¶</a></h3>
<p>In the default configuration, the ~4.2 V supply is generated from the mainboard’s 5V rail utilizing a silicon diode to achieve a voltage drop of ~0.7 V which results in an adequate bias voltage.</p>
</section>
<section id="linear-regulator">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Linear Regulator</a><a class="headerlink" href="#linear-regulator" title="Permalink to this heading">¶</a></h3>
<p>For fine-tuning and experimental purposes, an additional linear regulator has been implemented.
It is supplied via the mainboard’s Input voltage and can therefore output voltages above 5V.
Please note, that this regulator will not work when the mainboard is only supplied via USB.</p>
<p>In the default configuration, the Feedback network of this regulator is just partially populated, missing R6.
That way it will output a voltage of ~1.7V until it has been reconfigured.
For setting the output voltage, a potentiometer can be connected to the bottom side of the PCB, or the appropriate voltage divider can directly be calculated according to the <a class="reference external" href="https://www.ti.com/lit/ds/symlink/tps7a4101.pdf?ts=1711547797794&amp;ref_url=https%253A%252F%252Fwww.ti.com%252Fpower-management%252Flinear-regulators-ldo%252Fproducts.html">TPS7A4101DGNR’s datasheet</a>.</p>
<figure class="align-default" id="id5">
<a class="reference internal image-reference" href="../../../../../_images/hv_shield_mosfet_linear_regulator.png"><img alt="../../../../../_images/hv_shield_mosfet_linear_regulator.png" src="../../../../../_images/hv_shield_mosfet_linear_regulator.png" style="width: 600px;" /></a>
<figcaption>
<p><span class="caption-text">Linear Regulator</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../../../index.html">ARDEP</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../bootloader/index.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../firmware_loader/index.html">UDS Firmware Loader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../console/index.html">Console Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../error_handling/index.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../README.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../lib/index.html">Libraries</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../scripts/ardep.html">ARDEP Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../mercedes/ardep/doc/index.html">ARDEP Board</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">ARDEP HV Shield</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../analog_io/index.html">Analog I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../changelog/index.html">Changelog</a></li>
<li class="toctree-l2"><a class="reference internal" href="../high_voltage_digital_io/index.html">High Voltage Digital I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="../io_config_register/index.html">I/O Config Register</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Voltage Supply</a></li>
<li class="toctree-l2"><a class="reference internal" href="../index.html#pinout">Pinout</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../power_io_shield/doc/index.html">ARDEP Power IO Shield</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../samples/index.html">Samples and Demos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../../debugging/index.html">Debugging</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">ARDEP HV Shield</a><ul>
      <li>Previous: <a href="../io_config_register/index.html" title="previous chapter">I/O Config Register</a></li>
      <li>Next: <a href="../../../power_io_shield/doc/index.html" title="next chapter">ARDEP Power IO Shield</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Frickly Systems GmbH.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../../../_sources/boards/shields/hv_shield/doc/voltage_supply/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>