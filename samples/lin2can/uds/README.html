
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>UDS Over LIN sample &#8212; ARDEP  documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/custom.css" />
    <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
    <script src="../../../_static/doctools.js"></script>
    <script src="../../../_static/sphinx_highlight.js"></script>
    <script src="../../../_static/clipboard.min.js"></script>
    <script src="../../../_static/copybutton.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="UART Sample" href="../../uart/README.html" />
    <link rel="prev" title="Lin2Can Responder Sample" href="../responder/README.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="uds-over-lin-sample">
<span id="lin2can-uds-sample"></span><h1>UDS Over LIN sample<a class="headerlink" href="#uds-over-lin-sample" title="Permalink to this heading">¶</a></h1>
<p>This example demonstrates DFU over LIN together with the <a class="reference internal" href="../gateway/README.html#lin2can-gateway-sample"><span class="std std-ref">Lin2Can Gateway Sample</span></a>.</p>
<p>Note that this sample is configured as a LIN responder.</p>
<section id="hardware-setup">
<h2>Hardware setup<a class="headerlink" href="#hardware-setup" title="Permalink to this heading">¶</a></h2>
<p>You will need 2 ARDEP Boards as well as 1 CAN to USB interface</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">+---------+</span>  <span class="o">+---------+</span> <span class="o">+---------+</span>
<span class="o">|</span> <span class="n">CAN2USB</span> <span class="o">|</span>  <span class="o">|</span> <span class="n">ARDEP</span> <span class="mi">1</span> <span class="o">|</span> <span class="o">|</span> <span class="n">ARDEP</span> <span class="mi">2</span> <span class="o">|</span>
<span class="o">|</span>         <span class="o">|</span>  <span class="o">|</span>         <span class="o">|</span> <span class="o">|</span>         <span class="o">|</span>
<span class="o">|</span> <span class="n">USB</span> <span class="n">CAN</span> <span class="o">|</span>  <span class="o">|</span> <span class="n">CAN</span> <span class="n">LIN</span> <span class="o">|</span> <span class="o">|</span> <span class="n">CAN</span> <span class="n">LIN</span> <span class="o">|</span>
<span class="o">+--+---+--+</span>  <span class="o">+--+---+--+</span> <span class="o">+------+--+</span>
   <span class="o">|</span>   <span class="o">|</span>        <span class="o">|</span>   <span class="o">|</span>           <span class="o">|</span>
   <span class="o">|</span>   <span class="o">+--------+</span>   <span class="o">+-----------+</span>
   <span class="o">|</span>
   <span class="o">|</span>        <span class="o">+---------+</span>
   <span class="o">|</span>        <span class="o">|</span> <span class="n">U</span>  <span class="n">HOST</span> <span class="o">|</span>
   <span class="o">+--------+</span> <span class="n">S</span>       <span class="o">|</span>
            <span class="o">|</span> <span class="n">B</span>       <span class="o">|</span>
            <span class="o">+---------+</span>
</pre></div>
</div>
</section>
<section id="build-and-flash">
<h2>Build and flash<a class="headerlink" href="#build-and-flash" title="Permalink to this heading">¶</a></h2>
<p>Build and flash the UDS application to the ARDEP 2 board in the diagram:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west<span class="w"> </span>build<span class="w"> </span>--board<span class="w"> </span>ardep<span class="w"> </span>samples/lin2can/uds
west<span class="w"> </span>flash
</pre></div>
</div>
<p>Build and flash the Gateway application to the ARDEP 1 board in the diagram:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west<span class="w"> </span>build<span class="w"> </span>--board<span class="w"> </span>ardep<span class="w"> </span>samples/lin2can/gateway
west<span class="w"> </span>flash
</pre></div>
</div>
</section>
<section id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading">¶</a></h2>
<ol class="arabic simple">
<li><p>Setup the can interface</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>can0<span class="w"> </span><span class="nb">type</span><span class="w"> </span>can<span class="w"> </span>bitrate<span class="w"> </span><span class="m">500000</span>
sudo<span class="w"> </span>ip<span class="w"> </span>link<span class="w"> </span><span class="nb">set</span><span class="w"> </span>up<span class="w"> </span>can0
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li><p>Build a new application to flash via uds (note that the new application must also support UDS over LIN if you need to update the application again, in this case we just use the led sample which does not support UDS over LIN).</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west<span class="w"> </span>build<span class="w"> </span>--board<span class="w"> </span>ardep<span class="w"> </span>samples/led<span class="w"> </span>--build-dir<span class="w"> </span>build-led
</pre></div>
</div>
</div></blockquote>
<ol class="arabic simple">
<li><p>Flash the new application using UDS:</p></li>
</ol>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>west<span class="w"> </span>ardep<span class="w"> </span>uds-dfu<span class="w"> </span>--build-dir<span class="w"> </span>build-led<span class="w"> </span>--interface<span class="w"> </span>can0
</pre></div>
</div>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../../index.html">ARDEP</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../bootloader/index.html">Bootloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../console/index.html">Console Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../error_handling/index.html">Error Handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../README.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../scripts/ardep.html">ARDEP Command</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/mercedes/ardep/doc/index.html">ARDEP Board</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../boards/shields/hv_shield/doc/index.html">ARDEP HV Shield</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Samples and Demos</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../adc/README.html">ADC Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../can/README.html">CAN sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../can_usb_bridge/README.html">CAN USB Bridge sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../config_jumpers/README.html">Config Jumpers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../dac/README.html">DAC sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../digital_input_interrupt/README.html">Digital Input Interrupt Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../gpio_expander/README.html">GPIO Expander</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware_test/README.html">Hardware Test Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hardware_tester/README.html">Hardware Tester Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../hv_shield/README.html">HV Shield</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../led/README.html">LED Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../lin/lin.html">Lin Samples</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../lin2can.html">Lin2Can Samples</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../uart/README.html">UART Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../uds/README.html">UDS Sample</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../uds_legacy/README.html">UDS Sample (Legacy)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../debugging/index.html">Debugging</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../index.html">Samples and Demos</a><ul>
  <li><a href="../lin2can.html">Lin2Can Samples</a><ul>
      <li>Previous: <a href="../responder/README.html" title="previous chapter">Lin2Can Responder Sample</a></li>
      <li>Next: <a href="../../uart/README.html" title="next chapter">UART Sample</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2024, Frickly Systems GmbH.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 6.2.1</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 0.7.16</a>
      
      |
      <a href="../../../_sources/samples/lin2can/uds/README.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>